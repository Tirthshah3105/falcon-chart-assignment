<div class="chart-wrapper">
  <h2 class="chart-title">{{ options.title }}</h2>
  
  <!-- Column Chart -->
  <svg *ngIf="options.type === 'column'" class="chart-svg" viewBox="0 0 400 300">
    <g class="chart-area">
      <line x1="50" y1="250" x2="350" y2="250" stroke="#ddd" stroke-width="1"></line>
      <line x1="50" y1="50" x2="50" y2="250" stroke="#333" stroke-width="2"></line>
      <line x1="50" y1="250" x2="350" y2="250" stroke="#333" stroke-width="2"></line>
      
      <g *ngFor="let series of scaledSeries; let i = index">
        <rect
          [attr.x]="50 + i * 80"
          [attr.y]="250 - (series.scaledValue * 2)"
          width="60"
          [attr.height]="series.scaledValue * 2"
          [attr.fill]="series.color"
          opacity="0.85"
        ></rect>
        <text [attr.x]="85 + i * 80" y="280" text-anchor="middle" class="label">
          {{ series.name }}
        </text>
        <text [attr.x]="85 + i * 80" [attr.y]="235 - (series.scaledValue * 2)" text-anchor="middle" class="value">
          {{ series.scaledValue.toFixed(0) }}%
        </text>
      </g>
    </g>
  </svg>

  <!-- Line Chart -->
  <svg *ngIf="options.type === 'line'" class="chart-svg" viewBox="0 0 400 300">
    <g class="chart-area">
      <line x1="50" y1="50" x2="50" y2="250" stroke="#333" stroke-width="2"></line>
      <line x1="50" y1="250" x2="350" y2="250" stroke="#333" stroke-width="2"></line>
      
      <polyline
        [attr.points]="getLinePointsSVG()"
        fill="none"
        stroke="#2563eb"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      ></polyline>
      
      <g *ngFor="let series of scaledSeries; let i = index">
        <circle [attr.cx]="60 + i * 100" [attr.cy]="250 - (series.scaledValue * 2)" r="4" [attr.fill]="series.color"></circle>
        <text [attr.x]="60 + i * 100" y="280" text-anchor="middle" class="label">
          {{ series.name }}
        </text>
      </g>
    </g>
  </svg>

  <!-- Pie Chart -->
  <svg *ngIf="options.type === 'pie'" class="chart-svg" viewBox="0 0 400 300">
    <g class="chart-area">
      <g *ngFor="let series of scaledSeries; let i = index">
        <circle
          cx="120"
          cy="140"
          r="80"
          [attr.fill]="series.color"
          [attr.stroke-dasharray]="getSliceDasharray(i)"
          [attr.stroke-dashoffset]="getSliceDashoffset(i)"
          stroke-width="60"
          opacity="0.85"
        ></circle>
      </g>
      
      <g *ngFor="let series of scaledSeries; let i = index">
        <rect [attr.x]="240" [attr.y]="60 + i * 35" width="18" height="18" [attr.fill]="series.color"></rect>
        <text x="270" [attr.y]="78 + i * 35" class="label">{{ series.name }} ({{ series.scaledValue.toFixed(0) }}%)</text>
      </g>
    </g>
  </svg>
</div>